

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Quasi-Random Sequence Generator Comparison &mdash; QMCPy 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="A Monte Carlo vs Quasi-Monte Carlo Comparison" href="MC_vs_QMC.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> QMCPy
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../readme.html">About Our QMC Software Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithms.html">QMCPy Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../demos.html">Demos</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="qmcpy_intro.html">Welcome to QMCPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="integration_examples.html">Integration Examples using QMCPy package</a></li>
<li class="toctree-l2"><a class="reference internal" href="lebesgue_integration.html">QMCPy for Lebesgue Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="sample_scatter_plots.html">Scatter Plots of Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="MC_vs_QMC.html">A Monte Carlo vs Quasi-Monte Carlo Comparison</a></li>
<li class="toctree-l2"><a class="reference internal" href="MC_vs_QMC.html#absolute-tolerance-plots">Absolute Tolerance Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="MC_vs_QMC.html#dimension-plots">Dimension Plots</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Quasi-Random Sequence Generator Comparison</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#general-lattice-sobol-generator-usage">General Lattice &amp; Sobol Generator Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#magic-point-shop-generators-vs-qmcpy-generators"><em>Magic Point Shop</em> Generators vs QMCPy Generators</a></li>
<li class="toctree-l3"><a class="reference internal" href="#matlab-vs-r-vs-python-generator-speed">MATLAB vs R vs Python Generator Speed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#magic-point-shop-vs-pytorch-for-sobol-backend">Magic Point Shop vs Pytorch for Sobol Backend</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">QMCPy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../demos.html">Demos</a> &raquo;</li>
        
      <li>Quasi-Random Sequence Generator Comparison</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">

           <div itemprop="articleBody">
            
  <div class="section" id="quasi-random-sequence-generator-comparison">
<h1>Quasi-Random Sequence Generator Comparison<a class="headerlink" href="#quasi-random-sequence-generator-comparison" title="Permalink to this headline">¶</a></h1>
<p>QMCPy’s low-discrepancy-sequence generators are built upon generators
developed by 1. D. Nuyens, <em>The Magic Point Shop of QMC point generators
and generating vectors.</em> MATLAB and Python software, 2018. Available
from <a class="reference external" href="https://people.cs.kuleuven.be/~dirk.nuyens/">https://people.cs.kuleuven.be/~dirk.nuyens/</a> 2. PyTorch: An
Imperative Style, High-Performance Deep Learning Library. Paszke, Adam
and Gross, Sam and Massa, Francisco and Lerer, Adam and Bradbury, James
and Chanan, Gregory and Killeen, Trevor and Lin, Zeming and Gimelshein,
Natalia and Antiga, Luca and Desmaison, Alban and Kopf, Andreas and
Yang, Edward and DeVito, Zachary and Raison, Martin and Tejani, Alykhan
and Chilamkurthy, Sasank and Steiner, Benoit and Fang, Lu and Bai,
Junjie and Chintala, Soumith. Advances in Neural Information Processing
Systems 32. H. Wallach and H. Larochelle and A. Beygelzimer and F.
d:raw-latex:<a href="#id1"><span class="problematic" id="id2">`</span></a>textquotesingle <a href="#id3"><span class="problematic" id="id4">`</span></a>Alch’{e}-Buc and E. Fox and R. Garnett.
Pages 8024–8035. 2019. Curran Associates,
Inc.http://papers.neurips.cc/paper/9015-pytorch-an-imperative-style-high-performance-deep-learning-library.pdf</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qmcpy</span> <span class="k">import</span> <span class="o">*</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">float_format</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{:.2e}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span>

<span class="kn">from</span> <span class="nn">numpy</span> <span class="k">import</span> <span class="o">*</span>

<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="k">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="o">%</span><span class="k">matplotlib</span> inline

<span class="n">SMALL_SIZE</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">MEDIUM_SIZE</span> <span class="o">=</span> <span class="mi">12</span>
<span class="n">BIGGER_SIZE</span> <span class="o">=</span> <span class="mi">14</span>

<span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">&#39;font&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">BIGGER_SIZE</span><span class="p">)</span>          <span class="c1"># controls default text sizes</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">&#39;axes&#39;</span><span class="p">,</span> <span class="n">titlesize</span><span class="o">=</span><span class="n">BIGGER_SIZE</span><span class="p">)</span>     <span class="c1"># fontsize of the axes title</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">&#39;axes&#39;</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="n">BIGGER_SIZE</span><span class="p">)</span>    <span class="c1"># fontsize of the x and y labels</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">&#39;xtick&#39;</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="n">MEDIUM_SIZE</span><span class="p">)</span>    <span class="c1"># fontsize of the tick labels</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">&#39;ytick&#39;</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="n">MEDIUM_SIZE</span><span class="p">)</span>    <span class="c1"># fontsize of the tick labels</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">&#39;legend&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">BIGGER_SIZE</span><span class="p">)</span>    <span class="c1"># legend fontsize</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">&#39;figure&#39;</span><span class="p">,</span> <span class="n">titlesize</span><span class="o">=</span><span class="n">BIGGER_SIZE</span><span class="p">)</span>  <span class="c1"># fontsize of the figure title</span>
</pre></div>
</div>
<div class="section" id="general-lattice-sobol-generator-usage">
<h2>General Lattice &amp; Sobol Generator Usage<a class="headerlink" href="#general-lattice-sobol-generator-usage" title="Permalink to this headline">¶</a></h2>
<p>The following example uses the <code class="docutils literal notranslate"><span class="pre">Lattice</span></code> object to generate samples.
The same code works when replacing <code class="docutils literal notranslate"><span class="pre">Lattice</span></code> with <code class="docutils literal notranslate"><span class="pre">Sobol</span></code></p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Unshifted Samples</span>
<span class="n">lattice_gen</span> <span class="o">=</span> <span class="n">Lattice</span><span class="p">(</span><span class="n">rng_seed</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="n">unshifted_samples</span> <span class="o">=</span> <span class="n">lattice_gen</span><span class="o">.</span><span class="n">gen_dd_samples</span><span class="p">(</span><span class="n">replications</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">n_samples</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">scramble</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Shape:&#39;</span><span class="p">,</span><span class="n">unshifted_samples</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Samples:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">unshifted_samples</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Shape</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">Samples</span><span class="p">:</span>
<span class="p">[[[</span> <span class="mf">0.000</span>  <span class="mf">0.000</span><span class="p">]</span>
  <span class="p">[</span> <span class="mf">0.500</span>  <span class="mf">0.500</span><span class="p">]</span>
  <span class="p">[</span> <span class="mf">0.250</span>  <span class="mf">0.750</span><span class="p">]</span>
  <span class="p">[</span> <span class="mf">0.750</span>  <span class="mf">0.250</span><span class="p">]]]</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Shifted Samples</span>
<span class="n">lattice_gen</span> <span class="o">=</span> <span class="n">Lattice</span><span class="p">(</span><span class="n">rng_seed</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="n">shifted_samples</span> <span class="o">=</span> <span class="n">lattice_gen</span><span class="o">.</span><span class="n">gen_dd_samples</span><span class="p">(</span><span class="n">replications</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">n_samples</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># defaults scramble=True</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Shape:&#39;</span><span class="p">,</span><span class="n">shifted_samples</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Samples:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">shifted_samples</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Shape</span><span class="p">:</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">Samples</span><span class="p">:</span>
<span class="p">[[[</span> <span class="mf">0.625</span>  <span class="mf">0.897</span>  <span class="mf">0.776</span><span class="p">]</span>
  <span class="p">[</span> <span class="mf">0.125</span>  <span class="mf">0.397</span>  <span class="mf">0.276</span><span class="p">]]</span>

 <span class="p">[[</span> <span class="mf">0.225</span>  <span class="mf">0.300</span>  <span class="mf">0.874</span><span class="p">]</span>
  <span class="p">[</span> <span class="mf">0.725</span>  <span class="mf">0.800</span>  <span class="mf">0.374</span><span class="p">]]]</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Next Shifted Samples from same Lattice instance</span>
<span class="n">next_shifted_samples</span> <span class="o">=</span> <span class="n">lattice_gen</span><span class="o">.</span><span class="n">gen_dd_samples</span><span class="p">(</span><span class="n">replications</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">n_samples</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">dimensions</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Shape:&#39;</span><span class="p">,</span><span class="n">next_shifted_samples</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Samples:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">next_shifted_samples</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Shape</span><span class="p">:</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">Samples</span><span class="p">:</span>
<span class="p">[[[</span> <span class="mf">0.875</span>  <span class="mf">0.647</span>  <span class="mf">0.526</span><span class="p">]</span>
  <span class="p">[</span> <span class="mf">0.375</span>  <span class="mf">0.147</span>  <span class="mf">0.026</span><span class="p">]]</span>

 <span class="p">[[</span> <span class="mf">0.475</span>  <span class="mf">0.050</span>  <span class="mf">0.624</span><span class="p">]</span>
  <span class="p">[</span> <span class="mf">0.975</span>  <span class="mf">0.550</span>  <span class="mf">0.124</span><span class="p">]]]</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">next_next_shifted_samples</span> <span class="o">=</span> <span class="n">lattice_gen</span><span class="o">.</span><span class="n">gen_dd_samples</span><span class="p">(</span><span class="n">replications</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">n_samples</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">dimensions</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Shape:&#39;</span><span class="p">,</span><span class="n">next_next_shifted_samples</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Samples:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">next_next_shifted_samples</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Shape</span><span class="p">:</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">Samples</span><span class="p">:</span>
<span class="p">[[[</span> <span class="mf">0.750</span>  <span class="mf">0.272</span>  <span class="mf">0.151</span><span class="p">]</span>
  <span class="p">[</span> <span class="mf">0.000</span>  <span class="mf">0.022</span>  <span class="mf">0.901</span><span class="p">]</span>
  <span class="p">[</span> <span class="mf">0.250</span>  <span class="mf">0.772</span>  <span class="mf">0.651</span><span class="p">]</span>
  <span class="p">[</span> <span class="mf">0.500</span>  <span class="mf">0.522</span>  <span class="mf">0.401</span><span class="p">]]</span>

 <span class="p">[[</span> <span class="mf">0.350</span>  <span class="mf">0.675</span>  <span class="mf">0.249</span><span class="p">]</span>
  <span class="p">[</span> <span class="mf">0.600</span>  <span class="mf">0.425</span>  <span class="mf">0.999</span><span class="p">]</span>
  <span class="p">[</span> <span class="mf">0.850</span>  <span class="mf">0.175</span>  <span class="mf">0.749</span><span class="p">]</span>
  <span class="p">[</span> <span class="mf">0.100</span>  <span class="mf">0.925</span>  <span class="mf">0.499</span><span class="p">]]]</span>
</pre></div>
</div>
<p>Once replications and dimensions are set in the first call to
gen_dd_samples, they are enforced in following calls. The first call to
gen_dd_samples can take any n_samples = <img class="math" src="../_images/math/80a14ca8faab24426c9382e5598b7e77bc428feb.png" alt="2^i"/>. However, following
calls require n_samples to be <img class="math" src="../_images/math/80a14ca8faab24426c9382e5598b7e77bc428feb.png" alt="2^i"/> then <img class="math" src="../_images/math/69e05e9168877288972c606345775e916d21f98e.png" alt="2^{i+1}"/> then
<img class="math" src="../_images/math/732d62894d5e0aedaa38f66a2e36cbc9b2857c54.png" alt="2^{i+2}"/> then … Rerunning the previous 3 blocks with different
parameters may help clarify.</p>
</div>
<div class="section" id="magic-point-shop-generators-vs-qmcpy-generators">
<h2><em>Magic Point Shop</em> Generators vs QMCPy Generators<a class="headerlink" href="#magic-point-shop-generators-vs-qmcpy-generators" title="Permalink to this headline">¶</a></h2>
<p>In an effort to improve the generators speed, QMCPy developers modified
the algorithms developed in <em>The Magic Point Shop</em>. The following blocks
visualize the speed improvement of QMCPy when generating 1 dimensional
unshifted/unscrambled sequences. Data for the following plots can be
generated by running ~~~ python
workouts/wo_lds_sequences/mps_original_vs_qmcpy.py ~~~</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_mps</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;../outputs/lds_sequences/magic_point_shop_times.csv&#39;</span><span class="p">)</span>
<span class="n">df_mps</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">,</span><span class="s1">&#39;mps_lattice_t&#39;</span><span class="p">,</span><span class="s1">&#39;qmcpy_lattice_t&#39;</span><span class="p">,</span><span class="s1">&#39;mps_Sobol_t&#39;</span><span class="p">,</span><span class="s1">&#39;qmcpy_Sobol_t&#39;</span><span class="p">]</span>
<span class="n">df_mps</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mps_lattice_t</th>
      <th>qmcpy_lattice_t</th>
      <th>mps_Sobol_t</th>
      <th>qmcpy_Sobol_t</th>
    </tr>
    <tr>
      <th>n</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>2.00e+00</td>
      <td>3.85e-05</td>
      <td>8.21e-05</td>
      <td>7.80e-01</td>
      <td>4.77e-03</td>
    </tr>
    <tr>
      <td>4.00e+00</td>
      <td>6.10e-05</td>
      <td>7.72e-05</td>
      <td>7.77e-01</td>
      <td>2.82e-03</td>
    </tr>
    <tr>
      <td>8.00e+00</td>
      <td>6.99e-05</td>
      <td>8.92e-05</td>
      <td>7.98e-01</td>
      <td>2.89e-03</td>
    </tr>
    <tr>
      <td>1.60e+01</td>
      <td>1.31e-04</td>
      <td>8.97e-05</td>
      <td>8.32e-01</td>
      <td>2.79e-03</td>
    </tr>
    <tr>
      <td>3.20e+01</td>
      <td>2.60e-04</td>
      <td>1.14e-04</td>
      <td>7.49e-01</td>
      <td>2.84e-03</td>
    </tr>
    <tr>
      <td>6.40e+01</td>
      <td>4.87e-04</td>
      <td>1.24e-04</td>
      <td>7.29e-01</td>
      <td>2.92e-03</td>
    </tr>
    <tr>
      <td>1.28e+02</td>
      <td>8.80e-04</td>
      <td>1.26e-04</td>
      <td>7.29e-01</td>
      <td>3.04e-03</td>
    </tr>
    <tr>
      <td>2.56e+02</td>
      <td>1.61e-03</td>
      <td>1.38e-04</td>
      <td>7.38e-01</td>
      <td>3.36e-03</td>
    </tr>
    <tr>
      <td>5.12e+02</td>
      <td>3.43e-03</td>
      <td>2.48e-04</td>
      <td>7.35e-01</td>
      <td>3.88e-03</td>
    </tr>
    <tr>
      <td>1.02e+03</td>
      <td>6.58e-03</td>
      <td>1.90e-04</td>
      <td>7.35e-01</td>
      <td>4.79e-03</td>
    </tr>
    <tr>
      <td>2.05e+03</td>
      <td>1.26e-02</td>
      <td>1.88e-04</td>
      <td>7.45e-01</td>
      <td>6.86e-03</td>
    </tr>
    <tr>
      <td>4.10e+03</td>
      <td>2.38e-02</td>
      <td>2.26e-04</td>
      <td>7.51e-01</td>
      <td>1.09e-02</td>
    </tr>
    <tr>
      <td>8.19e+03</td>
      <td>4.72e-02</td>
      <td>2.91e-04</td>
      <td>7.76e-01</td>
      <td>1.94e-02</td>
    </tr>
    <tr>
      <td>1.64e+04</td>
      <td>9.26e-02</td>
      <td>4.27e-04</td>
      <td>8.17e-01</td>
      <td>3.58e-02</td>
    </tr>
    <tr>
      <td>3.28e+04</td>
      <td>1.93e-01</td>
      <td>6.54e-04</td>
      <td>8.87e-01</td>
      <td>6.84e-02</td>
    </tr>
    <tr>
      <td>6.55e+04</td>
      <td>3.87e-01</td>
      <td>1.06e-03</td>
      <td>1.05e+00</td>
      <td>1.37e-01</td>
    </tr>
    <tr>
      <td>1.31e+05</td>
      <td>7.73e-01</td>
      <td>1.92e-03</td>
      <td>1.36e+00</td>
      <td>2.69e-01</td>
    </tr>
    <tr>
      <td>2.62e+05</td>
      <td>1.57e+00</td>
      <td>3.67e-03</td>
      <td>1.98e+00</td>
      <td>5.33e-01</td>
    </tr>
    <tr>
      <td>5.24e+05</td>
      <td>3.15e+00</td>
      <td>7.64e-03</td>
      <td>3.22e+00</td>
      <td>1.07e+00</td>
    </tr>
    <tr>
      <td>1.05e+06</td>
      <td>6.29e+00</td>
      <td>1.53e-02</td>
      <td>5.74e+00</td>
      <td>2.13e+00</td>
    </tr>
  </tbody>
</table>
</div><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">df_mps</span><span class="o">.</span><span class="n">n</span>
<span class="n">suf_lattice</span> <span class="o">=</span> <span class="n">df_mps</span><span class="o">.</span><span class="n">mps_lattice_t</span><span class="o">.</span><span class="n">values</span> <span class="o">/</span> <span class="n">df_mps</span><span class="o">.</span><span class="n">qmcpy_lattice_t</span><span class="o">.</span><span class="n">values</span>
<span class="n">suf_Sobol</span> <span class="o">=</span> <span class="n">df_mps</span><span class="o">.</span><span class="n">mps_Sobol_t</span><span class="o">.</span><span class="n">values</span> <span class="o">/</span> <span class="n">df_mps</span><span class="o">.</span><span class="n">qmcpy_Sobol_t</span><span class="o">.</span><span class="n">values</span>
<span class="n">ax</span><span class="o">.</span><span class="n">loglog</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">suf_lattice</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Lattice&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">loglog</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">suf_Sobol</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Sobol&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;g&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;center left&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Sampling Points&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Speed-Up Factor&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Speed Improvement of QMCPy to Magic Point Shop Generators&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;../outputs/lds_sequences/mps_vs_qmcpy_generators.png&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/quasirandom_generators_10_0.png" src="../_images/quasirandom_generators_10_0.png" />
</div>
<div class="section" id="matlab-vs-r-vs-python-generator-speed">
<h2>MATLAB vs R vs Python Generator Speed<a class="headerlink" href="#matlab-vs-r-vs-python-generator-speed" title="Permalink to this headline">¶</a></h2>
<p>Compare the speed of low-discrepancy-sequence generators from MATLAB, R,
and Python. The following blocks visualize a speed comparison with
MATLAB when generating 1 dimensional shifted/scrambled sequences. Note
that the generators are reinitialized before every trial. Python data
for the following plots can be generated by running ~~~ python
workouts/wo_lds_sequences/qmcpy_sequences.py ~~~ MATLAB data can be
generated by running the file at
<code class="docutils literal notranslate"><span class="pre">workouts/wo_lds_sequences/matlab_sequences.py</span></code> R data can be
generated by running the file at
<code class="docutils literal notranslate"><span class="pre">workouts/wo_lds_sequences/r_sequences.py</span></code> Notes - For Python,
generators are part of the QMCPy package and located at
<code class="docutils literal notranslate"><span class="pre">qmcpy/discrete_distribution/</span></code> - For MATLAB, the Sobol generator is
built in, while the lattice generator is part of the GAIL package: -
Sou-Cheng T. Choi, Yuhan Ding, Fred J. Hickernell, Lan Jiang, Lluis
Antoni Jimenez Rugama, Da Li, Jagadeeswaran Rathinavel, Xin Tong, Kan
Zhang, Yizhi Zhang, and Xuan Zhou, GAIL: Guaranteed Automatic
Integration Library (Version 2.3) [MATLAB Software], 2019. Available
from <a class="reference external" href="http://gailgithub.github.io/GAIL_Dev/">http://gailgithub.github.io/GAIL_Dev/</a> - lattice_gen from:
<a class="reference external" href="https://github.com/GailGithub/GAIL_Dev/blob/master/Algorithms/%2Bgail/lattice_gen.m">https://github.com/GailGithub/GAIL_Dev/blob/master/Algorithms/%2Bgail/lattice_gen.m</a>
- For R, the Sobol generator is part of the qrng package - Marius Hofert
and Christiane Lemieux (2019). qrng: (Randomized)Quasi-Random Number
Generators. R package version 0.0-7.
<a class="reference external" href="https://CRAN.R-project.org/package=qrng">https://CRAN.R-project.org/package=qrng</a></p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_matlab</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;../outputs/lds_sequences/matlab_sequence_times.csv&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">df_matlab</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;m_Lattice_t&#39;</span><span class="p">,</span> <span class="s1">&#39;m_Sobol_t&#39;</span><span class="p">]</span>
<span class="n">df_python</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;../outputs/lds_sequences/python_sequence_times.csv&#39;</span><span class="p">)</span>
<span class="n">df_python</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;py_Lattice_t&#39;</span><span class="p">,</span> <span class="s1">&#39;py_Sobol_MPS_t&#39;</span><span class="p">,</span> <span class="s1">&#39;py_Sobol_Pytorch_t&#39;</span><span class="p">]</span>
<span class="n">df_r</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;../outputs/lds_sequences/r_sequence_times.csv&#39;</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="n">df_r</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">,</span><span class="s1">&#39;r_Sobol_t&#39;</span><span class="p">]</span>
<span class="n">df_r</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df_languages</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df_matlab</span><span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">],</span>
    <span class="n">df_matlab</span><span class="p">[</span><span class="s1">&#39;m_Lattice_t&#39;</span><span class="p">],</span> <span class="n">df_python</span><span class="p">[</span><span class="s1">&#39;py_Lattice_t&#39;</span><span class="p">],</span>\
    <span class="n">df_matlab</span><span class="p">[</span><span class="s1">&#39;m_Sobol_t&#39;</span><span class="p">],</span> <span class="n">df_r</span><span class="p">[</span><span class="s1">&#39;r_Sobol_t&#39;</span><span class="p">],</span> \
    <span class="n">df_python</span><span class="p">[</span><span class="s1">&#39;py_Sobol_MPS_t&#39;</span><span class="p">],</span> <span class="n">df_python</span><span class="p">[</span><span class="s1">&#39;py_Sobol_Pytorch_t&#39;</span><span class="p">]],</span>
    <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">df_languages</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>m_Lattice_t</th>
      <th>py_Lattice_t</th>
      <th>m_Sobol_t</th>
      <th>r_Sobol_t</th>
      <th>py_Sobol_MPS_t</th>
      <th>py_Sobol_Pytorch_t</th>
    </tr>
    <tr>
      <th>n</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>2.00e+00</td>
      <td>3.76e-04</td>
      <td>1.91e-04</td>
      <td>6.36e-04</td>
      <td>1.40e-04</td>
      <td>1.86e-03</td>
      <td>5.77e-04</td>
    </tr>
    <tr>
      <td>4.00e+00</td>
      <td>2.23e-04</td>
      <td>1.72e-04</td>
      <td>3.91e-04</td>
      <td>1.69e-04</td>
      <td>5.38e-04</td>
      <td>2.31e-03</td>
    </tr>
    <tr>
      <td>8.00e+00</td>
      <td>1.54e-04</td>
      <td>2.45e-04</td>
      <td>3.68e-04</td>
      <td>1.44e-04</td>
      <td>5.01e-04</td>
      <td>1.87e-03</td>
    </tr>
    <tr>
      <td>1.60e+01</td>
      <td>1.59e-04</td>
      <td>2.40e-04</td>
      <td>9.57e-04</td>
      <td>1.57e-04</td>
      <td>5.63e-04</td>
      <td>2.61e-04</td>
    </tr>
    <tr>
      <td>3.20e+01</td>
      <td>1.68e-04</td>
      <td>2.51e-04</td>
      <td>4.58e-04</td>
      <td>1.67e-04</td>
      <td>5.39e-04</td>
      <td>2.06e-03</td>
    </tr>
    <tr>
      <td>6.40e+01</td>
      <td>1.60e-04</td>
      <td>2.82e-04</td>
      <td>5.07e-04</td>
      <td>1.48e-04</td>
      <td>6.63e-04</td>
      <td>2.73e-03</td>
    </tr>
    <tr>
      <td>1.28e+02</td>
      <td>1.60e-04</td>
      <td>2.34e-04</td>
      <td>4.09e-04</td>
      <td>1.72e-04</td>
      <td>8.34e-04</td>
      <td>2.56e-03</td>
    </tr>
    <tr>
      <td>2.56e+02</td>
      <td>1.72e-04</td>
      <td>2.94e-04</td>
      <td>2.84e-04</td>
      <td>1.62e-04</td>
      <td>1.13e-03</td>
      <td>2.45e-03</td>
    </tr>
    <tr>
      <td>5.12e+02</td>
      <td>1.87e-04</td>
      <td>2.85e-04</td>
      <td>2.47e-04</td>
      <td>1.54e-04</td>
      <td>1.63e-03</td>
      <td>1.68e-03</td>
    </tr>
    <tr>
      <td>1.02e+03</td>
      <td>1.85e-04</td>
      <td>3.34e-04</td>
      <td>2.66e-04</td>
      <td>1.96e-04</td>
      <td>3.13e-03</td>
      <td>3.74e-04</td>
    </tr>
    <tr>
      <td>2.05e+03</td>
      <td>2.02e-04</td>
      <td>3.38e-04</td>
      <td>2.64e-04</td>
      <td>2.12e-04</td>
      <td>5.64e-03</td>
      <td>3.40e-04</td>
    </tr>
    <tr>
      <td>4.10e+03</td>
      <td>3.15e-04</td>
      <td>4.30e-04</td>
      <td>8.80e-04</td>
      <td>2.72e-04</td>
      <td>9.65e-03</td>
      <td>3.08e-04</td>
    </tr>
    <tr>
      <td>8.19e+03</td>
      <td>3.59e-04</td>
      <td>5.35e-04</td>
      <td>9.59e-04</td>
      <td>5.12e-04</td>
      <td>1.84e-02</td>
      <td>3.26e-04</td>
    </tr>
    <tr>
      <td>1.64e+04</td>
      <td>5.28e-04</td>
      <td>7.58e-04</td>
      <td>1.10e-03</td>
      <td>7.29e-04</td>
      <td>3.51e-02</td>
      <td>3.53e-04</td>
    </tr>
    <tr>
      <td>3.28e+04</td>
      <td>6.85e-04</td>
      <td>1.21e-03</td>
      <td>6.33e-04</td>
      <td>1.20e-03</td>
      <td>7.19e-02</td>
      <td>5.04e-04</td>
    </tr>
    <tr>
      <td>6.55e+04</td>
      <td>1.56e-03</td>
      <td>2.14e-03</td>
      <td>8.61e-04</td>
      <td>2.07e-03</td>
      <td>1.45e-01</td>
      <td>6.04e-04</td>
    </tr>
    <tr>
      <td>1.31e+05</td>
      <td>2.35e-03</td>
      <td>4.06e-03</td>
      <td>1.50e-03</td>
      <td>4.48e-03</td>
      <td>2.88e-01</td>
      <td>1.08e-03</td>
    </tr>
    <tr>
      <td>2.62e+05</td>
      <td>4.93e-03</td>
      <td>9.36e-03</td>
      <td>2.92e-03</td>
      <td>1.42e-02</td>
      <td>5.76e-01</td>
      <td>1.69e-03</td>
    </tr>
    <tr>
      <td>5.24e+05</td>
      <td>9.92e-03</td>
      <td>1.73e-02</td>
      <td>5.80e-03</td>
      <td>2.80e-02</td>
      <td>1.16e+00</td>
      <td>4.23e-03</td>
    </tr>
    <tr>
      <td>1.05e+06</td>
      <td>1.99e-02</td>
      <td>3.52e-02</td>
      <td>1.11e-02</td>
      <td>7.01e-02</td>
      <td>2.49e+00</td>
      <td>6.50e-03</td>
    </tr>
  </tbody>
</table>
</div><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">df_languages</span><span class="o">.</span><span class="n">n</span>
<span class="c1"># Lattice Plot</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">loglog</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">df_languages</span><span class="p">[</span><span class="s1">&#39;m_Lattice_t&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;MATLAB&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;c&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">loglog</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">df_languages</span><span class="p">[</span><span class="s1">&#39;py_Lattice_t&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Python&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;m&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Sampling Points&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Lattice Generation Time (seconds)&#39;</span><span class="p">)</span>
<span class="c1"># Sobol Plot</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">loglog</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">df_languages</span><span class="p">[</span><span class="s1">&#39;m_Sobol_t&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;MATLAB&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;c&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">loglog</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">df_languages</span><span class="p">[</span><span class="s1">&#39;r_Sobol_t&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;R&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">loglog</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">df_languages</span><span class="p">[</span><span class="s1">&#39;py_Sobol_MPS_t&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Python MPS&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">loglog</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">df_languages</span><span class="p">[</span><span class="s1">&#39;py_Sobol_Pytorch_t&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Python Pytorch&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Sampling Points&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Sobol Generation Time (seconds)&#39;</span><span class="p">)</span>
<span class="c1"># Metas and Export</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Speed Comparison of MATLAB, R, and Python Quasi-Random Generators&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;../outputs/lds_sequences/matlab_vs_r_vs_python_generators.png&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/quasirandom_generators_13_0.png" src="../_images/quasirandom_generators_13_0.png" />
<p>The Magic Point Shop Lattice generator is comperable to MATLAB’s (GAIL),
but the Magic Point Shop Sobol is significanly slower. However, Pytorch
Sobol is comperable to MATLAB’s. It is important to note the above
results are for 1 replication of scrambling and individual generators
are initialized before each trial. The following blocks explore a more
realistic test with multiple replications gathered from a single Sobol
object, as would be utilized in a <em>QMCPy</em> integration problem.</p>
</div>
</div>
<div class="section" id="magic-point-shop-vs-pytorch-for-sobol-backend">
<h1>Magic Point Shop vs Pytorch for Sobol Backend<a class="headerlink" href="#magic-point-shop-vs-pytorch-for-sobol-backend" title="Permalink to this headline">¶</a></h1>
<p>Compare the speed of Sobol generators backended with generators from the
Magic Point Shop and Pytorch. Two seperate generators are initialized
(only once) and then asked for sample points as utilized in QMC stopping
criterion. This test attempts to replicate how the generator is used in
integration problems using <em>QMCPy</em>. Data for the following plots can be
generated by running ~~~ python
workouts/wo_lds_sequences/sobol_backends.py ~~~</p>
<p>Parameters - replications = 16 - dimension = 4</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_sobol_backends</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;../outputs/lds_sequences/sobol_backend_times.csv&#39;</span><span class="p">)</span>
<span class="n">df_sobol_backends</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">,</span><span class="s1">&#39;Sobol_MPS_t&#39;</span><span class="p">,</span><span class="s1">&#39;Sobol_PyTorch_t&#39;</span><span class="p">]</span>
<span class="n">df_sobol_backends</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Sobol_MPS_t</th>
      <th>Sobol_PyTorch_t</th>
    </tr>
    <tr>
      <th>n</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1.60e+01</td>
      <td>2.42e-03</td>
      <td>1.33e-02</td>
    </tr>
    <tr>
      <td>1.60e+01</td>
      <td>2.03e-04</td>
      <td>2.31e-04</td>
    </tr>
    <tr>
      <td>3.20e+01</td>
      <td>2.35e-04</td>
      <td>3.14e-04</td>
    </tr>
    <tr>
      <td>6.40e+01</td>
      <td>3.65e-04</td>
      <td>2.47e-04</td>
    </tr>
    <tr>
      <td>1.28e+02</td>
      <td>5.94e-04</td>
      <td>2.53e-04</td>
    </tr>
    <tr>
      <td>2.56e+02</td>
      <td>1.10e-03</td>
      <td>2.85e-04</td>
    </tr>
    <tr>
      <td>5.12e+02</td>
      <td>2.21e-03</td>
      <td>3.72e-04</td>
    </tr>
    <tr>
      <td>1.02e+03</td>
      <td>4.18e-03</td>
      <td>4.18e-04</td>
    </tr>
    <tr>
      <td>2.05e+03</td>
      <td>8.61e-03</td>
      <td>5.88e-04</td>
    </tr>
    <tr>
      <td>4.10e+03</td>
      <td>1.68e-02</td>
      <td>1.26e-03</td>
    </tr>
    <tr>
      <td>8.19e+03</td>
      <td>3.34e-02</td>
      <td>2.19e-03</td>
    </tr>
    <tr>
      <td>1.64e+04</td>
      <td>6.40e-02</td>
      <td>3.65e-03</td>
    </tr>
    <tr>
      <td>3.28e+04</td>
      <td>1.25e-01</td>
      <td>6.57e-03</td>
    </tr>
    <tr>
      <td>6.55e+04</td>
      <td>2.42e-01</td>
      <td>1.34e-02</td>
    </tr>
    <tr>
      <td>1.31e+05</td>
      <td>4.83e-01</td>
      <td>2.65e-02</td>
    </tr>
    <tr>
      <td>2.62e+05</td>
      <td>9.76e-01</td>
      <td>6.17e-02</td>
    </tr>
    <tr>
      <td>5.24e+05</td>
      <td>1.95e+00</td>
      <td>1.38e-01</td>
    </tr>
    <tr>
      <td>1.05e+06</td>
      <td>4.05e+00</td>
      <td>3.27e-01</td>
    </tr>
    <tr>
      <td>2.10e+06</td>
      <td>8.36e+00</td>
      <td>5.79e-01</td>
    </tr>
  </tbody>
</table>
</div><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">df_sobol_backends</span><span class="o">.</span><span class="n">n</span>
<span class="c1"># Lattice Plot</span>
<span class="n">ax</span><span class="o">.</span><span class="n">loglog</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">df_sobol_backends</span><span class="p">[</span><span class="s1">&#39;Sobol_MPS_t&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;MPS&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">loglog</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">df_sobol_backends</span><span class="p">[</span><span class="s1">&#39;Sobol_PyTorch_t&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Pytorch&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Sampling Points&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Sobol Generation Time (seconds)&#39;</span><span class="p">)</span>
<span class="c1"># Metas and Export</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Speed Comparison of Magic Point Shop and Pytorch Sobol Generators&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;../outputs/lds_sequences/sobol_mps_vs_pytorch.png&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/quasirandom_generators_17_0.png" src="../_images/quasirandom_generators_17_0.png" />
<p>While Magic Point Shop Sobol has a lower initialization time, Pytorch
Sobol is consistently faster to generate samples.</p>
</div>


           </div>
           
          </div>
    <a href="https://github.com/QMCSoftware/QMCSoftware">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" />
    </a>

          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="MC_vs_QMC.html" class="btn btn-neutral float-left" title="A Monte Carlo vs Quasi-Monte Carlo Comparison" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Illinois Institute of Technology

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>