

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Quasi-Random Sequence Generator Comparison &mdash; QMCPy 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="A Monte Carlo vs Quasi-Monte Carlo Comparison" href="MC_vs_QMC.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> QMCPy
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../readme.html">About Our QMC Software Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithms.html">QMCPy Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../demos.html">Demos</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="qmcpy_intro.html">Welcome to QMCPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="integration_examples.html">Integration Examples using QMCPy package</a></li>
<li class="toctree-l2"><a class="reference internal" href="lebesgue_integration.html">QMCPy for Lebesgue Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="sample_scatter_plots.html">Scatter Plots of Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="MC_vs_QMC.html">A Monte Carlo vs Quasi-Monte Carlo Comparison</a></li>
<li class="toctree-l2"><a class="reference internal" href="MC_vs_QMC.html#vary-absolute-tolerance">Vary Absolute Tolerance</a></li>
<li class="toctree-l2"><a class="reference internal" href="MC_vs_QMC.html#dimension-plots">Dimension Plots</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Quasi-Random Sequence Generator Comparison</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#general-lattice-sobol-generator-usage">General Lattice &amp; Sobol Generator Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#qmcpy-generator-times-comparison">QMCPy Generator Times Comparison</a></li>
<li class="toctree-l3"><a class="reference internal" href="#magic-point-shop-generators"><em>Magic Point Shop</em> Generators</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">QMCPy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../demos.html">Demos</a> &raquo;</li>
        
      <li>Quasi-Random Sequence Generator Comparison</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">

           <div itemprop="articleBody">
            
  <div class="section" id="quasi-random-sequence-generator-comparison">
<h1>Quasi-Random Sequence Generator Comparison<a class="headerlink" href="#quasi-random-sequence-generator-comparison" title="Permalink to this headline">¶</a></h1>
<p>QMCPy’s quasi-random sequence generators reference and build upon the
following projects.</p>
<p>[1] D. Nuyens, <em>The Magic Point Shop of QMC point generators and
generating vectors.</em> MATLAB and Python software, 2018. Available from
<a class="reference external" href="https://people.cs.kuleuven.be/~dirk.nuyens/">https://people.cs.kuleuven.be/~dirk.nuyens/</a></p>
<p>[2] Sou-Cheng T. Choi, Yuhan Ding, Fred J. Hickernell, Lan Jiang, Lluis
Antoni Jimenez Rugama, Da Li, Jagadeeswaran Rathinavel, Xin Tong, Kan
Zhang, Yizhi Zhang, and Xuan Zhou,GAIL: Guaranteed Automatic Integration
Library (Version 2.3) [MATLAB Software], 2019.Available from
<a class="reference external" href="http://gailgithub.github.io/GAIL_Dev/">http://gailgithub.github.io/GAIL_Dev/</a></p>
<p>[3] Marius Hofert and Christiane Lemieux (2019). qrng: (Randomized)
Quasi-Random Number Generators. R package version 0.0-7.
<a class="reference external" href="https://CRAN.R-project.org/package=qrng">https://CRAN.R-project.org/package=qrng</a></p>
<p>[4] PyTorch: An Imperative Style, High-Performance Deep Learning
Library. Paszke, Adam and Gross, Sam and Massa, Francisco and Lerer,
Adam and Bradbury, James and Chanan, Gregory and Killeen, Trevor and
Lin, Zeming and Gimelshein, Natalia and Antiga, Luca and Desmaison,
Alban and Kopf, Andreas and Yang, Edward and DeVito, Zachary and Raison,
Martin and Tejani, Alykhan and Chilamkurthy, Sasank and Steiner, Benoit
and Fang, Lu and Bai, Junjie and Chintala, Soumith. Advances in Neural
Information Processing Systems 32. H. Wallach and H. Larochelle and A.
Beygelzimer and F. d:raw-latex:<a href="#id1"><span class="problematic" id="id2">`</span></a>textquotesingle <a href="#id3"><span class="problematic" id="id4">`</span></a>Alch’{e}-Buc and E.
Fox and R. Garnett. Pages 8024–8035. 2019. Curran Associates,
Inc.http://papers.neurips.cc/paper/9015-pytorch-an-imperative-style-high-performance-deep-learning-library.pdf</p>
<p>AccumulateData for the following plots can be generated by running files
in <code class="docutils literal notranslate"><span class="pre">workouts/lds_sequences/</span></code></p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qmcpy</span> <span class="kn">import</span> <span class="o">*</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">float_format</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{:.2e}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span>

<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">set_printoptions</span><span class="p">(</span><span class="n">threshold</span><span class="o">=</span><span class="mi">2</span><span class="o">**</span><span class="mi">10</span><span class="p">)</span>
<span class="n">set_printoptions</span><span class="p">(</span><span class="n">precision</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="o">%</span><span class="k">matplotlib</span> inline

<span class="n">SMALL_SIZE</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">MEDIUM_SIZE</span> <span class="o">=</span> <span class="mi">12</span>
<span class="n">BIGGER_SIZE</span> <span class="o">=</span> <span class="mi">14</span>

<span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">&#39;font&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">BIGGER_SIZE</span><span class="p">)</span>          <span class="c1"># controls default text sizes</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">&#39;axes&#39;</span><span class="p">,</span> <span class="n">titlesize</span><span class="o">=</span><span class="n">BIGGER_SIZE</span><span class="p">)</span>     <span class="c1"># fontsize of the axes title</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">&#39;axes&#39;</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="n">BIGGER_SIZE</span><span class="p">)</span>    <span class="c1"># fontsize of the x and y labels</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">&#39;xtick&#39;</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="n">MEDIUM_SIZE</span><span class="p">)</span>    <span class="c1"># fontsize of the tick labels</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">&#39;ytick&#39;</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="n">MEDIUM_SIZE</span><span class="p">)</span>    <span class="c1"># fontsize of the tick labels</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">&#39;legend&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">BIGGER_SIZE</span><span class="p">)</span>    <span class="c1"># legend fontsize</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">&#39;figure&#39;</span><span class="p">,</span> <span class="n">titlesize</span><span class="o">=</span><span class="n">BIGGER_SIZE</span><span class="p">)</span>  <span class="c1"># fontsize of the figure title</span>
</pre></div>
</div>
<div class="section" id="general-lattice-sobol-generator-usage">
<h2>General Lattice &amp; Sobol Generator Usage<a class="headerlink" href="#general-lattice-sobol-generator-usage" title="Permalink to this headline">¶</a></h2>
<p>The following example uses the <code class="docutils literal notranslate"><span class="pre">Lattice</span></code> object to generate samples.
The same code works when replacing <code class="docutils literal notranslate"><span class="pre">Lattice</span></code> with <code class="docutils literal notranslate"><span class="pre">Sobol</span></code></p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Unshifted Samples</span>
<span class="n">lattice</span> <span class="o">=</span> <span class="n">Lattice</span><span class="p">(</span><span class="n">dimension</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">scramble</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">replications</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="s1">&#39;MPS&#39;</span><span class="p">)</span>
<span class="n">unshifted_samples</span> <span class="o">=</span> <span class="n">lattice</span><span class="o">.</span><span class="n">gen_samples</span><span class="p">(</span><span class="n">n_min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">n_max</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Shape:&#39;</span><span class="p">,</span><span class="n">unshifted_samples</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Samples:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">unshifted_samples</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Shape</span><span class="p">:</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">Samples</span><span class="p">:</span>
<span class="p">[[</span><span class="mf">0.</span>   <span class="mf">0.</span>  <span class="p">]</span>
 <span class="p">[</span><span class="mf">0.5</span>  <span class="mf">0.5</span> <span class="p">]</span>
 <span class="p">[</span><span class="mf">0.25</span> <span class="mf">0.75</span><span class="p">]</span>
 <span class="p">[</span><span class="mf">0.75</span> <span class="mf">0.25</span><span class="p">]]</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Shifted Samples</span>
<span class="n">lattice</span> <span class="o">=</span> <span class="n">Lattice</span><span class="p">(</span><span class="n">dimension</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">scramble</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">replications</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="s1">&#39;GAIL&#39;</span><span class="p">)</span>
<span class="n">shifted_samples</span> <span class="o">=</span> <span class="n">lattice</span><span class="o">.</span><span class="n">gen_samples</span><span class="p">(</span><span class="n">n_min</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">n_max</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Shape:&#39;</span><span class="p">,</span><span class="n">shifted_samples</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Samples:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">shifted_samples</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Shape</span><span class="p">:</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">Samples</span><span class="p">:</span>
<span class="p">[[</span><span class="mf">0.201</span> <span class="mf">0.405</span><span class="p">]</span>
 <span class="p">[</span><span class="mf">0.701</span> <span class="mf">0.905</span><span class="p">]</span>
 <span class="p">[</span><span class="mf">0.451</span> <span class="mf">0.655</span><span class="p">]</span>
 <span class="p">[</span><span class="mf">0.951</span> <span class="mf">0.155</span><span class="p">]]</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Multiple Replications</span>
<span class="n">lattice</span> <span class="o">=</span> <span class="n">Lattice</span><span class="p">(</span><span class="n">dimension</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">scramble</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">replications</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="s1">&#39;GAIL&#39;</span><span class="p">)</span>
<span class="n">samples</span> <span class="o">=</span> <span class="n">lattice</span><span class="o">.</span><span class="n">gen_samples</span><span class="p">(</span><span class="n">n_min</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">n_max</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Shape:&#39;</span><span class="p">,</span><span class="n">samples</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Samples:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">samples</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Shape</span><span class="p">:</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">Samples</span><span class="p">:</span>
<span class="p">[[[</span><span class="mf">0.326</span> <span class="mf">0.03</span> <span class="p">]</span>
  <span class="p">[</span><span class="mf">0.826</span> <span class="mf">0.53</span> <span class="p">]]</span>

 <span class="p">[[</span><span class="mf">0.688</span> <span class="mf">0.973</span><span class="p">]</span>
  <span class="p">[</span><span class="mf">0.188</span> <span class="mf">0.473</span><span class="p">]]</span>

 <span class="p">[[</span><span class="mf">0.228</span> <span class="mf">0.788</span><span class="p">]</span>
  <span class="p">[</span><span class="mf">0.728</span> <span class="mf">0.288</span><span class="p">]]]</span>
</pre></div>
</div>
</div>
<div class="section" id="qmcpy-generator-times-comparison">
<h2>QMCPy Generator Times Comparison<a class="headerlink" href="#qmcpy-generator-times-comparison" title="Permalink to this headline">¶</a></h2>
<p>Compare the speed of low-discrepancy-sequence generators from Python
(QMCPy), MATLAB, and R. The following blocks visualize a speed
comparison with MATLAB when generating 1 dimensional
unshifted/unscrambled sequences. Note that the generators are
reinitialized before every trial. &lt;br</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load AccumulateData</span>
<span class="n">df_py</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;../outputs/lds_sequences/python_sequence_times.csv&#39;</span><span class="p">)</span>
<span class="n">df_py</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">,</span><span class="s1">&#39;py_l_MPS&#39;</span><span class="p">,</span><span class="s1">&#39;py_l_GAIL&#39;</span><span class="p">,</span><span class="s1">&#39;py_s_MPS_OG&#39;</span><span class="p">,</span><span class="s1">&#39;py_s_MPS_QMCPy&#39;</span><span class="p">,</span><span class="s1">&#39;py_s_PYTORCH&#39;</span><span class="p">]</span>
<span class="n">df_m</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;../outputs/lds_sequences/matlab_sequence_times.csv&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">df_m</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;m_l&#39;</span><span class="p">,</span> <span class="s1">&#39;m_s&#39;</span><span class="p">]</span>
<span class="n">df_r</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;../outputs/lds_sequences/r_sequence_times.csv&#39;</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="n">df_r</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">,</span><span class="s1">&#39;r_s&#39;</span><span class="p">]</span>
<span class="n">df_r</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Lattice DataFrame</span>
<span class="n">df_l</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df_py</span><span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">],</span> <span class="n">df_py</span><span class="p">[</span><span class="s1">&#39;py_l_MPS&#39;</span><span class="p">],</span> <span class="n">df_py</span><span class="p">[</span><span class="s1">&#39;py_l_GAIL&#39;</span><span class="p">],</span><span class="n">df_m</span><span class="p">[</span><span class="s1">&#39;m_l&#39;</span><span class="p">]],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df_l</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;N_Lattice&#39;</span><span class="p">,</span><span class="s1">&#39;QMCPy_MPS&#39;</span><span class="p">,</span><span class="s1">&#39;QMCPy_GAIL&#39;</span><span class="p">,</span><span class="s1">&#39;MATLAB&#39;</span><span class="p">]</span>
<span class="n">df_l</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;N_Lattice&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>QMCPy_MPS</th>
      <th>QMCPy_GAIL</th>
      <th>MATLAB</th>
    </tr>
    <tr>
      <th>N_Lattice</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2.00e+00</th>
      <td>8.38e-05</td>
      <td>7.77e-05</td>
      <td>3.76e-04</td>
    </tr>
    <tr>
      <th>4.00e+00</th>
      <td>7.25e-05</td>
      <td>1.06e-04</td>
      <td>2.23e-04</td>
    </tr>
    <tr>
      <th>8.00e+00</th>
      <td>9.68e-05</td>
      <td>1.76e-04</td>
      <td>1.54e-04</td>
    </tr>
    <tr>
      <th>1.60e+01</th>
      <td>9.06e-05</td>
      <td>1.58e-04</td>
      <td>1.59e-04</td>
    </tr>
    <tr>
      <th>3.20e+01</th>
      <td>1.07e-04</td>
      <td>1.96e-04</td>
      <td>1.68e-04</td>
    </tr>
    <tr>
      <th>6.40e+01</th>
      <td>1.26e-04</td>
      <td>2.34e-04</td>
      <td>1.60e-04</td>
    </tr>
    <tr>
      <th>1.28e+02</th>
      <td>1.51e-04</td>
      <td>3.33e-04</td>
      <td>1.60e-04</td>
    </tr>
    <tr>
      <th>2.56e+02</th>
      <td>1.44e-04</td>
      <td>3.03e-04</td>
      <td>1.72e-04</td>
    </tr>
    <tr>
      <th>5.12e+02</th>
      <td>1.63e-04</td>
      <td>4.34e-04</td>
      <td>1.87e-04</td>
    </tr>
    <tr>
      <th>1.02e+03</th>
      <td>1.71e-04</td>
      <td>3.99e-04</td>
      <td>1.85e-04</td>
    </tr>
    <tr>
      <th>2.05e+03</th>
      <td>1.94e-04</td>
      <td>4.99e-04</td>
      <td>2.02e-04</td>
    </tr>
    <tr>
      <th>4.10e+03</th>
      <td>2.34e-04</td>
      <td>7.06e-04</td>
      <td>3.15e-04</td>
    </tr>
    <tr>
      <th>8.19e+03</th>
      <td>3.05e-04</td>
      <td>9.88e-04</td>
      <td>3.59e-04</td>
    </tr>
    <tr>
      <th>1.64e+04</th>
      <td>3.94e-04</td>
      <td>1.51e-03</td>
      <td>5.28e-04</td>
    </tr>
    <tr>
      <th>3.28e+04</th>
      <td>7.28e-04</td>
      <td>3.04e-03</td>
      <td>6.85e-04</td>
    </tr>
    <tr>
      <th>6.55e+04</th>
      <td>1.28e-03</td>
      <td>5.09e-03</td>
      <td>1.56e-03</td>
    </tr>
    <tr>
      <th>1.31e+05</th>
      <td>3.21e-03</td>
      <td>9.33e-03</td>
      <td>2.35e-03</td>
    </tr>
    <tr>
      <th>2.62e+05</th>
      <td>7.71e-03</td>
      <td>3.09e-02</td>
      <td>4.93e-03</td>
    </tr>
    <tr>
      <th>5.24e+05</th>
      <td>1.20e-02</td>
      <td>4.37e-02</td>
      <td>9.92e-03</td>
    </tr>
    <tr>
      <th>1.05e+06</th>
      <td>2.09e-02</td>
      <td>8.62e-02</td>
      <td>1.99e-02</td>
    </tr>
  </tbody>
</table>
</div><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Sobol DataFrame</span>
<span class="n">df_s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df_py</span><span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">],</span> <span class="n">df_py</span><span class="p">[</span><span class="s1">&#39;py_s_MPS_OG&#39;</span><span class="p">],</span> <span class="n">df_py</span><span class="p">[</span><span class="s1">&#39;py_s_MPS_QMCPy&#39;</span><span class="p">],</span> <span class="n">df_py</span><span class="p">[</span><span class="s1">&#39;py_s_PYTORCH&#39;</span><span class="p">],</span> \
                  <span class="n">df_m</span><span class="p">[</span><span class="s1">&#39;m_s&#39;</span><span class="p">],</span> <span class="n">df_r</span><span class="p">[</span><span class="s1">&#39;r_s&#39;</span><span class="p">]],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df_s</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;N_Sobol&#39;</span><span class="p">,</span><span class="s1">&#39;MPS&#39;</span><span class="p">,</span><span class="s1">&#39;QMCPy_MPS&#39;</span><span class="p">,</span><span class="s1">&#39;PYTORCH&#39;</span><span class="p">,</span><span class="s1">&#39;MATLAB&#39;</span><span class="p">,</span><span class="s1">&#39;R&#39;</span><span class="p">]</span>
<span class="n">df_s</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;N_Sobol&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>MPS</th>
      <th>QMCPy_MPS</th>
      <th>PYTORCH</th>
      <th>MATLAB</th>
      <th>R</th>
    </tr>
    <tr>
      <th>N_Sobol</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2.00e+00</th>
      <td>8.02e-01</td>
      <td>5.30e-04</td>
      <td>6.63e-03</td>
      <td>6.36e-04</td>
      <td>1.40e-04</td>
    </tr>
    <tr>
      <th>4.00e+00</th>
      <td>7.88e-01</td>
      <td>5.22e-04</td>
      <td>1.35e-04</td>
      <td>3.91e-04</td>
      <td>1.69e-04</td>
    </tr>
    <tr>
      <th>8.00e+00</th>
      <td>8.15e-01</td>
      <td>4.32e-04</td>
      <td>1.28e-04</td>
      <td>3.68e-04</td>
      <td>1.44e-04</td>
    </tr>
    <tr>
      <th>1.60e+01</th>
      <td>8.21e-01</td>
      <td>4.32e-04</td>
      <td>1.29e-04</td>
      <td>9.57e-04</td>
      <td>1.57e-04</td>
    </tr>
    <tr>
      <th>3.20e+01</th>
      <td>8.02e-01</td>
      <td>4.49e-04</td>
      <td>1.36e-04</td>
      <td>4.58e-04</td>
      <td>1.67e-04</td>
    </tr>
    <tr>
      <th>6.40e+01</th>
      <td>9.16e-01</td>
      <td>5.24e-04</td>
      <td>1.35e-04</td>
      <td>5.07e-04</td>
      <td>1.48e-04</td>
    </tr>
    <tr>
      <th>1.28e+02</th>
      <td>7.99e-01</td>
      <td>6.09e-04</td>
      <td>1.28e-04</td>
      <td>4.09e-04</td>
      <td>1.72e-04</td>
    </tr>
    <tr>
      <th>2.56e+02</th>
      <td>8.56e-01</td>
      <td>9.91e-04</td>
      <td>1.66e-04</td>
      <td>2.84e-04</td>
      <td>1.62e-04</td>
    </tr>
    <tr>
      <th>5.12e+02</th>
      <td>7.80e-01</td>
      <td>1.42e-03</td>
      <td>1.47e-04</td>
      <td>2.47e-04</td>
      <td>1.54e-04</td>
    </tr>
    <tr>
      <th>1.02e+03</th>
      <td>8.24e-01</td>
      <td>2.41e-03</td>
      <td>1.42e-04</td>
      <td>2.66e-04</td>
      <td>1.96e-04</td>
    </tr>
    <tr>
      <th>2.05e+03</th>
      <td>8.07e-01</td>
      <td>4.43e-03</td>
      <td>1.48e-04</td>
      <td>2.64e-04</td>
      <td>2.12e-04</td>
    </tr>
    <tr>
      <th>4.10e+03</th>
      <td>7.84e-01</td>
      <td>8.99e-03</td>
      <td>1.47e-04</td>
      <td>8.80e-04</td>
      <td>2.72e-04</td>
    </tr>
    <tr>
      <th>8.19e+03</th>
      <td>8.76e-01</td>
      <td>1.82e-02</td>
      <td>1.69e-04</td>
      <td>9.59e-04</td>
      <td>5.12e-04</td>
    </tr>
    <tr>
      <th>1.64e+04</th>
      <td>8.96e-01</td>
      <td>3.25e-02</td>
      <td>2.00e-04</td>
      <td>1.10e-03</td>
      <td>7.29e-04</td>
    </tr>
    <tr>
      <th>3.28e+04</th>
      <td>9.27e-01</td>
      <td>6.97e-02</td>
      <td>2.74e-04</td>
      <td>6.33e-04</td>
      <td>1.20e-03</td>
    </tr>
    <tr>
      <th>6.55e+04</th>
      <td>1.12e+00</td>
      <td>1.36e-01</td>
      <td>4.46e-04</td>
      <td>8.61e-04</td>
      <td>2.07e-03</td>
    </tr>
    <tr>
      <th>1.31e+05</th>
      <td>1.61e+00</td>
      <td>3.03e-01</td>
      <td>1.90e-03</td>
      <td>1.50e-03</td>
      <td>4.48e-03</td>
    </tr>
    <tr>
      <th>2.62e+05</th>
      <td>2.35e+00</td>
      <td>5.60e-01</td>
      <td>1.56e-03</td>
      <td>2.92e-03</td>
      <td>1.42e-02</td>
    </tr>
    <tr>
      <th>5.24e+05</th>
      <td>3.56e+00</td>
      <td>1.14e+00</td>
      <td>2.73e-03</td>
      <td>5.80e-03</td>
      <td>2.80e-02</td>
    </tr>
    <tr>
      <th>1.05e+06</th>
      <td>6.29e+00</td>
      <td>2.33e+00</td>
      <td>1.16e-02</td>
      <td>1.11e-02</td>
      <td>7.01e-02</td>
    </tr>
  </tbody>
</table>
</div><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot AccumulateData</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="c1"># Lattice</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">df_l</span><span class="p">[</span><span class="s1">&#39;N_Lattice&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">l_type</span><span class="p">,</span><span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">([</span><span class="s1">&#39;QMCPy_MPS&#39;</span><span class="p">,</span><span class="s1">&#39;QMCPy_GAIL&#39;</span><span class="p">,</span><span class="s1">&#39;MATLAB&#39;</span><span class="p">],[</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;m&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">]):</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">loglog</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">df_l</span><span class="p">[</span><span class="n">l_type</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="n">l_type</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Sampling Points&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Generation Time (Seconds)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Lattice&#39;</span><span class="p">)</span>
<span class="c1"># Sobol Plot</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">df_s</span><span class="p">[</span><span class="s1">&#39;N_Sobol&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">s_type</span><span class="p">,</span><span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">([</span><span class="s1">&#39;QMCPy_MPS&#39;</span><span class="p">,</span><span class="s1">&#39;PYTORCH&#39;</span><span class="p">,</span><span class="s1">&#39;MATLAB&#39;</span><span class="p">,</span><span class="s1">&#39;R&#39;</span><span class="p">],[</span><span class="s1">&#39;g&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="s1">&#39;k&#39;</span><span class="p">]):</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">loglog</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">df_s</span><span class="p">[</span><span class="n">s_type</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="n">s_type</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Sampling Points&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Sobol&#39;</span><span class="p">)</span>
<span class="c1"># Metas and Export</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Speed Comparison of Quasi-Random Sequence Generators&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;../outputs/lds_sequences/lds_generator_times.png&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/quasirandom_generators_10_0.png" src="../_images/quasirandom_generators_10_0.png" />
<p>For lattice, QMCPy with GAIL backend is slower than both the Magic Point
Shop backend and MATLAB. For Sobol, QMCPy with Magic Point Shop backend
is significantly slower than using PyTorch backend or generating with
MATLAB or R. It is important to note the above results are for 1
replication of unshifted/unscrambled nodes and individual generator
instances were initialized before each trial.</p>
</div>
<div class="section" id="magic-point-shop-generators">
<h2><em>Magic Point Shop</em> Generators<a class="headerlink" href="#magic-point-shop-generators" title="Permalink to this headline">¶</a></h2>
<p>In an effort to improve the generators speed, QMCPy developers modified
the Sobol generator developed in <em>The Magic Point Shop</em>. The following
blocks visualize the speed improvement of QMCPy when generating 1
dimensional unscrambled sobol nodes.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">df_l</span><span class="p">[</span><span class="s1">&#39;N_Lattice&#39;</span><span class="p">]</span>
<span class="n">suf_s</span> <span class="o">=</span> <span class="n">df_s</span><span class="p">[</span><span class="s1">&#39;MPS&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span> <span class="o">/</span> <span class="n">df_s</span><span class="p">[</span><span class="s1">&#39;QMCPy_MPS&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="n">ax</span><span class="o">.</span><span class="n">loglog</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">suf_s</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Sobol&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;lower left&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Sampling Points&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Speed-Up Factor&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Speed Improvement of QMCPy MPS to Original MPS Generators&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;../outputs/lds_sequences/mps_speed_up_factor.png&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/quasirandom_generators_13_0.png" src="../_images/quasirandom_generators_13_0.png" />
</div>
</div>


           </div>
           
          </div>
    <a href="https://github.com/QMCSoftware/QMCSoftware">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" />
    </a>

          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="MC_vs_QMC.html" class="btn btn-neutral float-left" title="A Monte Carlo vs Quasi-Monte Carlo Comparison" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Illinois Institute of Technology

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>