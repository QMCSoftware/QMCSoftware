

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>QMCPy Quickstart &mdash; QMCPy 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Welcome to QMCPy" href="qmcpy_intro.html" />
    <link rel="prev" title="Demos" href="../demos.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> QMCPy
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../readme.html">About Our QMC Software Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithms.html">QMCPy Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../demos.html">Demos</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">QMCPy Quickstart</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#step-1-discete-distribution-which-generates-samples">Step 1: Discete Distribution which generates samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-2-true-measure-which-transforms-the-integrand-to-accept-the-discrete-distribution">Step 2: True Measure which transforms the Integrand to accept the Discrete Distribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-3-integrand-where-samples-should-mimic-the-true-measure">Step 3: Integrand where samples should mimic the True Measure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-4-stopping-criterion-that-controls-integration-process">Step 4: Stopping Criterion that controls integration process</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-5-integrate">Step 5: Integrate</a></li>
<li class="toctree-l3"><a class="reference internal" href="#condensed-problem">Condensed Problem</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#note">Note</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="qmcpy_intro.html">Welcome to QMCPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="integration_examples.html">Integration Examples using QMCPy package</a></li>
<li class="toctree-l2"><a class="reference internal" href="lebesgue_integration.html">QMCPy for Lebesgue Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="sample_scatter_plots.html">Scatter Plots of Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="MC_vs_QMC.html">A Monte Carlo vs Quasi-Monte Carlo Comparison</a></li>
<li class="toctree-l2"><a class="reference internal" href="quasirandom_generators.html">Quasi-Random Sequence Generator Comparison</a></li>
<li class="toctree-l2"><a class="reference internal" href="sampling_measures.html">Sampling from Known and Unknown Measures</a></li>
<li class="toctree-l2"><a class="reference internal" href="importance_sampling.html">Importance Sampling Examples</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">QMCPy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../demos.html">Demos</a> &raquo;</li>
        
      <li>QMCPy Quickstart</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">

           <div itemprop="articleBody">
            
  <div class="section" id="qmcpy-quickstart">
<h1>QMCPy Quickstart<a class="headerlink" href="#qmcpy-quickstart" title="Permalink to this headline">¶</a></h1>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qmcpy</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
<p>Suppose we are interested in calculating</p>
<div class="math">
<p><img src="../_images/math/289fe8d78c79a763f806a839785d9c0ca4305df2.png" alt="\mathbb{E}[keister(x)] = \mathbb{E}[\pi^{d/2} \cos(||x_j||_2)] \text{ for } x \sim \mathcal{N}(0,\frac{1}{2})^d"/></p>
</div><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dimension</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">true_value</span> <span class="o">=</span> <span class="mf">1.808186429263620</span>
<span class="n">abs_tol</span> <span class="o">=</span> <span class="mf">1e-4</span>
<span class="k">def</span> <span class="nf">keister</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="c1"># Also implemented in qmcpy/integrands/keister.py</span>
    <span class="c1"># QMCPy will pass in a numpy ndarray, x, with shape n x d</span>
    <span class="c1">#    n samples</span>
    <span class="c1">#    d dimensions</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">norm_x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="c1"># equivalent to np.linalg.norm(x,2,axis=1)</span>
    <span class="n">k</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">**</span><span class="p">(</span><span class="n">d</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">norm_x</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">k</span> <span class="c1"># k.shape should be n or nx1</span>
</pre></div>
</div>
<div class="section" id="step-1-discete-distribution-which-generates-samples">
<h2>Step 1: Discete Distribution which generates samples<a class="headerlink" href="#step-1-discete-distribution-which-generates-samples" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">discrete_distribution</span> <span class="o">=</span> <span class="n">Lattice</span><span class="p">(</span><span class="n">dimension</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="step-2-true-measure-which-transforms-the-integrand-to-accept-the-discrete-distribution">
<h2>Step 2: True Measure which transforms the Integrand to accept the Discrete Distribution<a class="headerlink" href="#step-2-true-measure-which-transforms-the-integrand-to-accept-the-discrete-distribution" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">true_measure</span> <span class="o">=</span> <span class="n">Gaussian</span><span class="p">(</span><span class="n">discrete_distribution</span><span class="p">,</span> <span class="n">mean</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">covariance</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="step-3-integrand-where-samples-should-mimic-the-true-measure">
<h2>Step 3: Integrand where samples should mimic the True Measure<a class="headerlink" href="#step-3-integrand-where-samples-should-mimic-the-true-measure" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">integrand</span> <span class="o">=</span> <span class="n">QuickConstruct</span><span class="p">(</span><span class="n">true_measure</span><span class="p">,</span> <span class="n">custom_fun</span><span class="o">=</span><span class="n">keister</span><span class="p">)</span>
<span class="c1"># or integrand = Keister(true_measure) using QMCPy Keister class</span>
</pre></div>
</div>
</div>
<div class="section" id="step-4-stopping-criterion-that-controls-integration-process">
<h2>Step 4: Stopping Criterion that controls integration process<a class="headerlink" href="#step-4-stopping-criterion-that-controls-integration-process" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stopping_criterion</span> <span class="o">=</span> <span class="n">CubLattice_g</span><span class="p">(</span><span class="n">integrand</span><span class="p">,</span> <span class="n">abs_tol</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="step-5-integrate">
<h2>Step 5: Integrate<a class="headerlink" href="#step-5-integrate" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">solution</span><span class="p">,</span><span class="n">data</span> <span class="o">=</span> <span class="n">stopping_criterion</span><span class="o">.</span><span class="n">integrate</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Within absolute tolerance:&#39;</span><span class="p">,</span><span class="nb">abs</span><span class="p">(</span><span class="n">solution</span><span class="o">-</span><span class="n">true_value</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">abs_tol</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Solution</span><span class="p">:</span> <span class="mf">1.8082</span>
<span class="n">QuickConstruct</span> <span class="p">(</span><span class="n">Integrand</span> <span class="n">Object</span><span class="p">)</span>
<span class="n">Lattice</span> <span class="p">(</span><span class="n">DiscreteDistribution</span> <span class="n">Object</span><span class="p">)</span>
    <span class="n">dimension</span>       <span class="mi">2</span>
    <span class="n">scramble</span>        <span class="mi">1</span>
    <span class="n">seed</span>            <span class="kc">None</span>
    <span class="n">backend</span>         <span class="n">gail</span>
    <span class="n">mimics</span>          <span class="n">StdUniform</span>
<span class="n">Gaussian</span> <span class="p">(</span><span class="n">TrueMeasure</span> <span class="n">Object</span><span class="p">)</span>
    <span class="n">distrib_name</span>    <span class="n">Lattice</span>
    <span class="n">mean</span>            <span class="mi">0</span>
    <span class="n">covariance</span>      <span class="mf">0.500</span>
<span class="n">CubLattice_g</span> <span class="p">(</span><span class="n">StoppingCriterion</span> <span class="n">Object</span><span class="p">)</span>
    <span class="n">abs_tol</span>         <span class="mf">0.000</span>
    <span class="n">rel_tol</span>         <span class="mi">0</span>
    <span class="n">n_init</span>          <span class="mi">1024</span>
    <span class="n">n_max</span>           <span class="mi">34359738368</span>
<span class="n">CubatureData</span> <span class="p">(</span><span class="n">AccumulateData</span> <span class="n">Object</span><span class="p">)</span>
    <span class="n">n_total</span>         <span class="mi">65536</span>
    <span class="n">solution</span>        <span class="mf">1.808</span>
    <span class="n">r_lag</span>           <span class="mi">4</span>
    <span class="n">time_integrate</span>  <span class="mf">0.084</span>

<span class="n">Within</span> <span class="n">absolute</span> <span class="n">tolerance</span><span class="p">:</span> <span class="kc">True</span>
</pre></div>
</div>
</div>
<div class="section" id="condensed-problem">
<h2>Condensed Problem<a class="headerlink" href="#condensed-problem" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># solution,data =  StoppingCriterion(Integrand(TrueMeasure(DiscreteDistribution(dimension)))).integrate()</span>
<span class="n">solution</span><span class="p">,</span><span class="n">data</span> <span class="o">=</span> <span class="n">CubLattice_g</span><span class="p">(</span> <span class="c1"># stopping criterion</span>
                    <span class="n">QuickConstruct</span><span class="p">(</span> <span class="c1"># integrand: QuickConstruct takes a function handle as its 2nd input</span>
                        <span class="n">Gaussian</span><span class="p">(</span> <span class="c1"># true measure</span>
                            <span class="n">Lattice</span><span class="p">(</span><span class="n">dimension</span><span class="p">),</span> <span class="c1"># discrete distribution</span>
                            <span class="n">covariance</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="c1"># gaussian true measure attribute</span>
                        <span class="n">keister</span><span class="p">),</span> <span class="c1"># function handle</span>
                    <span class="n">abs_tol</span>
                <span class="p">)</span><span class="o">.</span><span class="n">integrate</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Within absolute tolerance:&#39;</span><span class="p">,</span><span class="nb">abs</span><span class="p">(</span><span class="n">solution</span><span class="o">-</span><span class="n">true_value</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">abs_tol</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Solution</span><span class="p">:</span> <span class="mf">1.8082</span>
<span class="n">QuickConstruct</span> <span class="p">(</span><span class="n">Integrand</span> <span class="n">Object</span><span class="p">)</span>
<span class="n">Lattice</span> <span class="p">(</span><span class="n">DiscreteDistribution</span> <span class="n">Object</span><span class="p">)</span>
    <span class="n">dimension</span>       <span class="mi">2</span>
    <span class="n">scramble</span>        <span class="mi">1</span>
    <span class="n">seed</span>            <span class="kc">None</span>
    <span class="n">backend</span>         <span class="n">gail</span>
    <span class="n">mimics</span>          <span class="n">StdUniform</span>
<span class="n">Gaussian</span> <span class="p">(</span><span class="n">TrueMeasure</span> <span class="n">Object</span><span class="p">)</span>
    <span class="n">distrib_name</span>    <span class="n">Lattice</span>
    <span class="n">mean</span>            <span class="mi">0</span>
    <span class="n">covariance</span>      <span class="mf">0.500</span>
<span class="n">CubLattice_g</span> <span class="p">(</span><span class="n">StoppingCriterion</span> <span class="n">Object</span><span class="p">)</span>
    <span class="n">abs_tol</span>         <span class="mf">0.000</span>
    <span class="n">rel_tol</span>         <span class="mi">0</span>
    <span class="n">n_init</span>          <span class="mi">1024</span>
    <span class="n">n_max</span>           <span class="mi">34359738368</span>
<span class="n">CubatureData</span> <span class="p">(</span><span class="n">AccumulateData</span> <span class="n">Object</span><span class="p">)</span>
    <span class="n">n_total</span>         <span class="mi">65536</span>
    <span class="n">solution</span>        <span class="mf">1.808</span>
    <span class="n">r_lag</span>           <span class="mi">4</span>
    <span class="n">time_integrate</span>  <span class="mf">0.135</span>

<span class="n">Within</span> <span class="n">absolute</span> <span class="n">tolerance</span><span class="p">:</span> <span class="kc">True</span>
</pre></div>
</div>
<div class="section" id="note">
<h3>Note<a class="headerlink" href="#note" title="Permalink to this headline">¶</a></h3>
<p>The problem above is not meant to be comprehensive, but to be a quick
intro to using QMCPy for your integration problem. There are many other
implementations of the DiscreteDistribution, TrueMeasure, Integrand, and
StoppingCriterion abstract classes. See the other demos, workouts, class
implementation, or documentation for further examples, parameters, and
use-cases.</p>
</div>
</div>
</div>


           </div>
           
          </div>
    <a href="https://github.com/QMCSoftware/QMCSoftware">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" />
    </a>

          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="qmcpy_intro.html" class="btn btn-neutral float-right" title="Welcome to QMCPy" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../demos.html" class="btn btn-neutral float-left" title="Demos" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Illinois Institute of Technology

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>